{{- /* Gallery Shortcode Usage: {{< gallery images="path/to/img1.jpg|path/to/img2.jpg" >}} With captions: {{< gallery images="path/to/img1.jpg:Caption 1|path/to/img2.jpg:Caption 2" >}} With alt text (for accessibility): {{< gallery
images="path/to/img1.jpg:Caption:Alt text|path/to/img2.jpg" >}} */ -}} {{- $galleryId := .Ordinal -}} {{- $imagesParam := .Get "images" -}} {{- $images := split $imagesParam "|" -}}

<div class="gallery" data-gallery-id="{{ $galleryId }}" role="region" aria-label="Image gallery">
    {{- range $index, $imageData := $images -}} {{- $parts := split $imageData ":" -}} {{- $src := index $parts 0 -}} {{- $caption := "" -}} {{- $alt := "" -}} {{- if gt (len $parts) 1 -}} {{- $caption = index $parts 1 -}} {{- end -}} {{-
    if gt (len $parts) 2 -}} {{- $alt = index $parts 2 -}} {{- else if $caption -}} {{- $alt = $caption -}} {{- else -}} {{- $alt = printf "Gallery image %d" (add $index 1) -}} {{- end -}}

    <img src="{{ $src }}" alt="{{ $alt }}" class="gallery-image" loading="lazy" decoding="async" tabindex="0" role="button" aria-label="View {{ $alt }} in full size" {{- if $caption }} data-caption="{{ $caption }}" {{ end -}} />
    {{- end -}}
</div>

{{- /* Register that this page uses a gallery (for conditional loading) */ -}} {{- .Page.Scratch.Set "hasGallery" true -}}
